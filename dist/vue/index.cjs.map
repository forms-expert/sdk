{"version":3,"sources":["../../vue/index.ts","../../vue/use-form.ts","../../core/types.ts","../../core/api-client.ts","../../core/forms-sdk.ts","../../vue/plugin.ts"],"sourcesContent":["// Vue exports\nexport * from './use-form';\nexport * from './plugin';\n","import { ref, computed, onMounted, Ref, ComputedRef } from 'vue';\nimport {\n  FormsSDK,\n  FormsSDKConfig,\n  FormStatusResponse,\n  SubmissionResponse,\n  ValidationError,\n  FormValidationError,\n} from '../core';\n\nexport interface UseFormOptions {\n  /** Form slug */\n  slug: string;\n  /** SDK configuration */\n  config: FormsSDKConfig;\n  /** Success callback */\n  onSuccess?: (response: SubmissionResponse) => void;\n  /** Error callback */\n  onError?: (error: Error) => void;\n  /** Validation error callback */\n  onValidationError?: (errors: ValidationError[]) => void;\n  /** Auto-initialize on mount */\n  autoInit?: boolean;\n  /** Language code to pass to backend */\n  lang?: string;\n}\n\nexport interface UseFormReturn {\n  /** Form configuration */\n  config: Ref<FormStatusResponse | null>;\n  /** Whether form is loading */\n  isLoading: Ref<boolean>;\n  /** Whether form is initializing */\n  isInitializing: Ref<boolean>;\n  /** Whether form was submitted successfully */\n  isSubmitted: Ref<boolean>;\n  /** Validation errors by field name */\n  errors: Ref<Record<string, string>>;\n  /** Form values */\n  values: Ref<Record<string, unknown>>;\n  /** Initialize the form */\n  initialize: () => Promise<FormStatusResponse>;\n  /** Set a field value */\n  setValue: (name: string, value: unknown) => void;\n  /** Set multiple values */\n  setValues: (values: Record<string, unknown>) => void;\n  /** Validate form data */\n  validate: () => Promise<boolean>;\n  /** Submit the form */\n  submit: (captchaToken?: string) => Promise<SubmissionResponse | null>;\n  /** Reset form to initial state */\n  reset: () => void;\n  /** Clear errors */\n  clearErrors: () => void;\n  /** Whether captcha is required */\n  requiresCaptcha: ComputedRef<boolean>;\n  /** Captcha provider */\n  captchaProvider: ComputedRef<'turnstile' | 'recaptcha' | 'hcaptcha' | undefined>;\n  /** Captcha site key */\n  captchaSiteKey: ComputedRef<string | undefined>;\n  /** Whether honeypot is enabled */\n  honeypotEnabled: ComputedRef<boolean>;\n}\n\n/**\n * Vue composable for managing form state and submission\n */\nexport function useForm(options: UseFormOptions): UseFormReturn {\n  const sdk = new FormsSDK(options.config);\n\n  const config = ref<FormStatusResponse | null>(null);\n  const isLoading = ref(false);\n  const isInitializing = ref(false);\n  const isSubmitted = ref(false);\n  const errors = ref<Record<string, string>>({});\n  const values = ref<Record<string, unknown>>({});\n\n  const initialize = async (): Promise<FormStatusResponse> => {\n    isInitializing.value = true;\n    try {\n      const formConfig = await sdk.isActive(options.slug, options.lang);\n      config.value = formConfig;\n      return formConfig;\n    } finally {\n      isInitializing.value = false;\n    }\n  };\n\n  const setValue = (name: string, value: unknown) => {\n    values.value = { ...values.value, [name]: value };\n    // Clear error on change\n    if (errors.value[name]) {\n      const { [name]: _, ...rest } = errors.value;\n      errors.value = rest;\n    }\n  };\n\n  const setValues = (newValues: Record<string, unknown>) => {\n    values.value = { ...values.value, ...newValues };\n  };\n\n  const validate = async (): Promise<boolean> => {\n    const result = await sdk.validate(options.slug, values.value);\n    if (!result.valid) {\n      const errorMap = result.errors.reduce(\n        (acc, err) => ({ ...acc, [err.field]: err.message }),\n        {} as Record<string, string>\n      );\n      errors.value = errorMap;\n    }\n    return result.valid;\n  };\n\n  const submit = async (captchaToken?: string): Promise<SubmissionResponse | null> => {\n    isLoading.value = true;\n    errors.value = {};\n\n    try {\n      // Add honeypot field if enabled\n      const submitData = config.value?.settings?.honeypot\n        ? { ...values.value, _hp: '' }\n        : values.value;\n\n      const response = await sdk.submit(options.slug, submitData, {\n        captchaToken,\n      });\n      isSubmitted.value = true;\n      options.onSuccess?.(response);\n      return response;\n    } catch (error) {\n      if (error instanceof FormValidationError) {\n        const errorMap = error.errors.reduce(\n          (acc, err) => ({ ...acc, [err.field]: err.message }),\n          {} as Record<string, string>\n        );\n        errors.value = errorMap;\n        options.onValidationError?.(error.errors);\n      } else {\n        options.onError?.(error as Error);\n      }\n      return null;\n    } finally {\n      isLoading.value = false;\n    }\n  };\n\n  const reset = () => {\n    values.value = {};\n    errors.value = {};\n    isSubmitted.value = false;\n    isLoading.value = false;\n  };\n\n  const clearErrors = () => {\n    errors.value = {};\n  };\n\n  const requiresCaptcha = computed(() => config.value?.settings?.captcha?.enabled ?? false);\n  const captchaProvider = computed(() => config.value?.settings?.captcha?.provider);\n  const captchaSiteKey = computed(() => config.value?.settings?.captcha?.siteKey);\n  const honeypotEnabled = computed(() => config.value?.settings?.honeypot ?? false);\n\n  // Auto-initialize\n  onMounted(() => {\n    if (options.autoInit !== false) {\n      initialize();\n    }\n  });\n\n  return {\n    config,\n    isLoading,\n    isInitializing,\n    isSubmitted,\n    errors,\n    values,\n    initialize,\n    setValue,\n    setValues,\n    validate,\n    submit,\n    reset,\n    clearErrors,\n    requiresCaptcha,\n    captchaProvider,\n    captchaSiteKey,\n    honeypotEnabled,\n  };\n}\n","/**\n * Form field types\n */\nexport type BasicFieldType =\n  | 'text' | 'email' | 'number' | 'textarea' | 'select'\n  | 'checkbox' | 'file' | 'date' | 'hidden';\n\nexport type InteractiveFieldType =\n  | 'radio' | 'multiselect' | 'rating' | 'scale' | 'toggle'\n  | 'ranking' | 'imageChoice' | 'phone' | 'url' | 'password'\n  | 'richText' | 'slider' | 'currency' | 'time' | 'datetime'\n  | 'dateRange' | 'address' | 'name' | 'dropdown' | 'colorPicker'\n  | 'location' | 'opinionScale' | 'consent';\n\nexport type LayoutFieldType = 'heading' | 'divider' | 'paragraph';\n\nexport type FormFieldType = BasicFieldType | InteractiveFieldType | LayoutFieldType;\n\nexport interface FormFieldOption {\n  label: string;\n  value: string;\n  imageUrl?: string;\n}\n\n/**\n * Form field definition\n */\nexport interface FormField {\n  name: string;\n  type: FormFieldType;\n  label?: string;\n  placeholder?: string;\n  required?: boolean;\n  options?: string[] | FormFieldOption[];\n  defaultValue?: unknown;\n  maxFileSize?: number;\n  allowedMimeTypes?: string[];\n  multiple?: boolean;\n  min?: number;\n  max?: number;\n  step?: number;\n  ratingMax?: number;\n  lowLabel?: string;\n  highLabel?: string;\n  defaultCountryCode?: string;\n  currencyCode?: string;\n  currencySymbol?: string;\n  addressFields?: ('street' | 'street2' | 'city' | 'state' | 'zip' | 'country')[];\n  nameFields?: ('prefix' | 'first' | 'middle' | 'last' | 'suffix')[];\n  content?: string;\n  paragraphFontSize?: number;\n  consentText?: string;\n  consentUrl?: string;\n  maxLength?: number;\n  stepId?: string;\n  visibleWhen?: {\n    field: string;\n    operator: 'eq' | 'neq' | 'contains' | 'gt' | 'lt';\n    value: unknown;\n  };\n}\n\n/**\n * Form styling configuration\n */\nexport interface FormStyling {\n  theme: 'light' | 'dark' | 'system';\n  primaryColor: string;\n  backgroundColor: string;\n  textColor: string;\n  errorColor?: string;\n  successColor?: string;\n  borderRadius: 'none' | 'sm' | 'md' | 'lg';\n  fontSize: 'sm' | 'md' | 'lg';\n  buttonStyle: 'filled' | 'outline';\n  labelPosition: 'top' | 'left' | 'floating';\n  customCss?: string;\n  // Extended styling (matching hosted form builder)\n  fontFamily?: string;\n  formWidth?: 'narrow' | 'medium' | 'wide' | 'full';\n  fieldLayout?: 'stacked' | 'inline';\n  buttonColor?: string;\n  buttonText?: string;\n  buttonRadius?: 'none' | 'small' | 'medium' | 'large' | 'full';\n  buttonAlign?: 'left' | 'center' | 'right';\n  fieldSpacing?: 'compact' | 'normal' | 'relaxed' | 'spacious';\n  formPadding?: 'none' | 'compact' | 'normal' | 'relaxed' | 'spacious';\n  labelSpacing?: 'compact' | 'normal' | 'relaxed';\n  placeholderFontSize?: 'small' | 'medium' | 'large';\n  headingSize?: 'small' | 'medium' | 'large' | 'extra-large';\n  paragraphSize?: 'small' | 'medium' | 'large';\n  hideRequiredAsterisk?: boolean;\n  logoUrl?: string;\n  logoPosition?: 'top-left' | 'top-center' | 'top-right';\n  coverImageUrl?: string;\n  backgroundImageUrl?: string;\n  backgroundOverlay?: number;\n  transparentBackground?: boolean;\n}\n\n/**\n * Form schema\n */\nexport interface FormSchema {\n  fields: FormField[];\n  styling?: FormStyling;\n}\n\n/**\n * Form captcha settings\n */\nexport interface CaptchaSettings {\n  enabled: boolean;\n  provider?: 'turnstile' | 'recaptcha' | 'hcaptcha';\n  siteKey?: string;\n}\n\n/**\n * Form branding configuration\n */\nexport interface FormBranding {\n  enabled: boolean;\n  text?: string;\n  url?: string;\n}\n\n/**\n * Form status response from API\n */\nexport interface FormStatusResponse {\n  active: boolean;\n  formId?: string;\n  name?: string;\n  description?: string | null;\n  mode?: 'free' | 'schema';\n  type?: 'hosted' | 'embed' | 'both';\n  layout?: 'single' | 'multi-step';\n  schema?: FormSchema;\n  steps?: Array<{ title: string; description?: string; fields: string[] }>;\n  /** Top-level styling (full hosted styling config) */\n  styling?: FormStyling;\n  embedConfig?: {\n    width?: string;\n    height?: string;\n    maxHeight?: string;\n    minHeight?: string;\n    autoResize?: boolean;\n    transparentBackground?: boolean;\n    [key: string]: unknown;\n  };\n  error?: string;\n  /** Captcha settings (top-level) */\n  captcha?: CaptchaSettings;\n  settings?: {\n    /** @deprecated Use top-level captcha instead */\n    captcha?: CaptchaSettings;\n    honeypot: boolean;\n    allowAttachments: boolean;\n    maxAttachments?: number;\n    maxAttachmentSize?: number;\n    successMessage?: string;\n    redirectUrl?: string;\n    showFormName?: boolean;\n  };\n  /** Access control configuration */\n  accessControl?: {\n    mode: string;\n    passwordProtected: boolean;\n  };\n  /** Branding configuration */\n  branding?: FormBranding;\n  /** Hosted config (page settings, success page, etc.) */\n  hostedConfig?: {\n    pageTitle?: string;\n    successMessage?: string;\n    successPageType?: 'message' | 'redirect' | 'custom';\n    redirectUrl?: string;\n    customSuccessHtml?: string;\n    [key: string]: unknown;\n  };\n  closesAt?: string | null;\n  resourceId?: string;\n  /** Available published translation language codes */\n  availableLanguages?: string[];\n  /** Current language applied to this response (null if base language) */\n  currentLanguage?: string | null;\n  /** Whether to show language switch UI */\n  showLanguageSwitch?: boolean;\n}\n\n/**\n * Validation error\n */\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\n/**\n * Validation response from API\n */\nexport interface ValidationResponse {\n  valid: boolean;\n  errors: ValidationError[];\n}\n\n/**\n * Submission response from API\n */\nexport interface SubmissionResponse {\n  success: boolean;\n  submissionId: string;\n  message: string;\n}\n\n/**\n * Submit options\n */\nexport interface SubmitOptions {\n  pageUrl?: string;\n  captchaToken?: string;\n  /** Callback for upload progress */\n  onProgress?: (progress: UploadProgress) => void;\n}\n\n/**\n * Upload progress information\n */\nexport interface UploadProgress {\n  loaded: number;\n  total: number;\n  percentage: number;\n}\n\n/**\n * File validation error\n */\nexport interface FileValidationError {\n  field: string;\n  file: string;\n  error: 'size' | 'type' | 'count';\n  message: string;\n}\n\n/**\n * SDK configuration\n */\nexport interface FormsSDKConfig {\n  apiKey: string;\n  resourceId: string;\n  baseUrl?: string;\n}\n\n/**\n * Form handler options\n */\nexport interface FormHandlerOptions {\n  /** Track form views for analytics (completion rate) */\n  trackViews?: boolean;\n  onSubmitStart?: () => void;\n  onSubmitSuccess?: (response: SubmissionResponse) => void;\n  onSubmitError?: (error: FormsError) => void;\n  onValidationError?: (errors: ValidationError[]) => void;\n}\n\n/**\n * Forms SDK error\n */\nexport class FormsError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public statusCode: number,\n    public retryAfter?: number\n  ) {\n    super(message);\n    this.name = 'FormsError';\n  }\n}\n\n/**\n * Validation error class\n */\nexport class FormValidationError extends Error {\n  constructor(public errors: ValidationError[]) {\n    super('Validation failed');\n    this.name = 'FormValidationError';\n  }\n}\n","import {\n  FormsSDKConfig,\n  FormStatusResponse,\n  ValidationResponse,\n  SubmissionResponse,\n  SubmitOptions,\n  FormsError,\n  UploadProgress,\n} from './types';\n\n/**\n * API client for forms backend\n */\nexport class FormsApiClient {\n  private baseUrl: string;\n  private apiKey: string;\n  private resourceId: string;\n\n  constructor(config: FormsSDKConfig) {\n    this.apiKey = config.apiKey;\n    this.resourceId = config.resourceId;\n    this.baseUrl = (config.baseUrl || 'https://api.forms.expert/api/v1').replace(/\\/$/, '');\n  }\n\n  /**\n   * Build URL with token query parameter\n   */\n  private buildUrl(path: string): string {\n    const separator = path.includes('?') ? '&' : '?';\n    return `${this.baseUrl}${path}${separator}token=${encodeURIComponent(this.apiKey)}`;\n  }\n\n  /**\n   * Make an API request\n   */\n  private async request<T>(\n    method: string,\n    path: string,\n    body?: object\n  ): Promise<T> {\n    const url = this.buildUrl(path);\n\n    const response = await fetch(url, {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: body ? JSON.stringify(body) : undefined,\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw new FormsError(\n        data.message || 'Request failed',\n        data.code || 'UNKNOWN_ERROR',\n        response.status,\n        data.retryAfter\n      );\n    }\n\n    return data;\n  }\n\n  /**\n   * Check if form is active and get configuration\n   */\n  async isActive(slug: string, lang?: string): Promise<FormStatusResponse> {\n    const langParam = lang ? `?lang=${encodeURIComponent(lang)}` : '';\n    return this.request('GET', `/f/${this.resourceId}/${slug}/is-active${langParam}`);\n  }\n\n  /**\n   * Validate form data without submitting\n   */\n  async validate(\n    slug: string,\n    data: Record<string, unknown>\n  ): Promise<ValidationResponse> {\n    return this.request('POST', `/f/${this.resourceId}/${slug}/validate`, {\n      data,\n    });\n  }\n\n  /**\n   * Submit form data (supports files)\n   */\n  async submit(\n    slug: string,\n    data: Record<string, unknown>,\n    options?: SubmitOptions\n  ): Promise<SubmissionResponse> {\n    const url = this.buildUrl(`/f/${this.resourceId}/${slug}`);\n    \n    // Check if data contains files\n    const hasFiles = Object.values(data).some(\n      (v) => v instanceof File || (v instanceof FileList && v.length > 0)\n    );\n\n    if (hasFiles || options?.onProgress) {\n      // Use FormData and XMLHttpRequest for file uploads with progress\n      return this.submitWithFormData(url, data, options);\n    }\n\n    // Use regular JSON request for non-file submissions\n    return this.request('POST', `/f/${this.resourceId}/${slug}`, {\n      data,\n      pageUrl: options?.pageUrl || (typeof window !== 'undefined' ? window.location.href : undefined),\n      captchaToken: options?.captchaToken,\n    });\n  }\n\n  /**\n   * Submit with FormData (for file uploads with progress tracking)\n   */\n  private submitWithFormData(\n    url: string,\n    data: Record<string, unknown>,\n    options?: SubmitOptions\n  ): Promise<SubmissionResponse> {\n    return new Promise((resolve, reject) => {\n      const formData = new FormData();\n\n      // Add data fields\n      for (const [key, value] of Object.entries(data)) {\n        if (value instanceof File) {\n          formData.append(key, value);\n        } else if (value instanceof FileList) {\n          Array.from(value).forEach((file) => formData.append(key, file));\n        } else if (value !== undefined && value !== null) {\n          formData.append(`data[${key}]`, String(value));\n        }\n      }\n\n      // Add metadata\n      const pageUrl = options?.pageUrl || (typeof window !== 'undefined' ? window.location.href : '');\n      if (pageUrl) {\n        formData.append('pageUrl', pageUrl);\n      }\n      if (options?.captchaToken) {\n        formData.append('captchaToken', options.captchaToken);\n      }\n\n      const xhr = new XMLHttpRequest();\n\n      // Progress tracking\n      if (options?.onProgress) {\n        xhr.upload.addEventListener('progress', (event) => {\n          if (event.lengthComputable) {\n            options.onProgress!({\n              loaded: event.loaded,\n              total: event.total,\n              percentage: Math.round((event.loaded / event.total) * 100),\n            });\n          }\n        });\n      }\n\n      xhr.addEventListener('load', () => {\n        try {\n          const response = JSON.parse(xhr.responseText);\n          if (xhr.status >= 200 && xhr.status < 300) {\n            resolve(response);\n          } else {\n            reject(new FormsError(\n              response.message || 'Submission failed',\n              response.code || 'UNKNOWN_ERROR',\n              xhr.status,\n              response.retryAfter\n            ));\n          }\n        } catch {\n          reject(new FormsError('Invalid response', 'PARSE_ERROR', xhr.status));\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        reject(new FormsError('Network error', 'NETWORK_ERROR', 0));\n      });\n\n      xhr.addEventListener('abort', () => {\n        reject(new FormsError('Request aborted', 'ABORTED', 0));\n      });\n\n      xhr.open('POST', url);\n      xhr.send(formData);\n    });\n  }\n\n  /**\n   * Track a form view (for analytics completion rate)\n   */\n  async trackView(slug: string): Promise<void> {\n    const url = this.buildUrl(`/f/${this.resourceId}/${slug}/view`);\n    await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' } }).catch(() => {});\n  }\n\n  /**\n   * Get resource ID\n   */\n  getResourceId(): string {\n    return this.resourceId;\n  }\n\n  /**\n   * Get base URL\n   */\n  getBaseUrl(): string {\n    return this.baseUrl;\n  }\n}\n","import { FormsApiClient } from './api-client';\nimport {\n  FormsSDKConfig,\n  FormStatusResponse,\n  ValidationResponse,\n  SubmissionResponse,\n  SubmitOptions,\n  FormHandlerOptions,\n  FormsError,\n  FormValidationError,\n} from './types';\n\n/**\n * Form handler for a specific form\n */\nexport class FormHandler {\n  private apiClient: FormsApiClient;\n  private slug: string;\n  private config: FormStatusResponse | null = null;\n  private options: FormHandlerOptions;\n\n  constructor(\n    apiClient: FormsApiClient,\n    slug: string,\n    options: FormHandlerOptions = {}\n  ) {\n    this.apiClient = apiClient;\n    this.slug = slug;\n    this.options = options;\n  }\n\n  /**\n   * Initialize form handler and fetch configuration\n   */\n  async initialize(lang?: string): Promise<FormStatusResponse> {\n    this.config = await this.apiClient.isActive(this.slug, lang);\n    if (this.options.trackViews) {\n      this.apiClient.trackView(this.slug);\n    }\n    return this.config;\n  }\n\n  /**\n   * Get cached form configuration\n   */\n  getConfig(): FormStatusResponse | null {\n    return this.config;\n  }\n\n  /**\n   * Check if form is active\n   */\n  isActive(): boolean {\n    return this.config?.active ?? false;\n  }\n\n  /**\n   * Check if captcha is required\n   */\n  requiresCaptcha(): boolean {\n    return this.config?.settings?.captcha?.enabled ?? false;\n  }\n\n  /**\n   * Get captcha provider\n   */\n  getCaptchaProvider(): 'turnstile' | 'recaptcha' | 'hcaptcha' | undefined {\n    return this.config?.settings?.captcha?.provider;\n  }\n\n  /**\n   * Get form schema\n   */\n  getSchema() {\n    return this.config?.schema;\n  }\n\n  /**\n   * Validate form data\n   */\n  async validate(data: Record<string, unknown>): Promise<ValidationResponse> {\n    return this.apiClient.validate(this.slug, data);\n  }\n\n  /**\n   * Submit form data\n   */\n  async submit(\n    data: Record<string, unknown>,\n    options?: SubmitOptions\n  ): Promise<SubmissionResponse> {\n    this.options.onSubmitStart?.();\n\n    try {\n      // Validate first if in schema mode\n      if (this.config?.mode === 'schema') {\n        const validation = await this.validate(data);\n        if (!validation.valid) {\n          this.options.onValidationError?.(validation.errors);\n          throw new FormValidationError(validation.errors);\n        }\n      }\n\n      const response = await this.apiClient.submit(this.slug, data, options);\n      this.options.onSubmitSuccess?.(response);\n      return response;\n    } catch (error) {\n      if (error instanceof FormsError) {\n        this.options.onSubmitError?.(error);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get success message from config\n   */\n  getSuccessMessage(): string {\n    return this.config?.settings?.successMessage || 'Form submitted successfully!';\n  }\n\n  /**\n   * Get redirect URL from config\n   */\n  getRedirectUrl(): string | undefined {\n    return this.config?.settings?.redirectUrl;\n  }\n}\n\n/**\n * Main Forms SDK class\n */\nexport class FormsSDK {\n  private apiClient: FormsApiClient;\n\n  constructor(config: FormsSDKConfig) {\n    this.apiClient = new FormsApiClient(config);\n  }\n\n  /**\n   * Check if form is active and get configuration\n   */\n  async isActive(slug: string, lang?: string): Promise<FormStatusResponse> {\n    return this.apiClient.isActive(slug, lang);\n  }\n\n  /**\n   * Validate form data without submitting\n   */\n  async validate(\n    slug: string,\n    data: Record<string, unknown>\n  ): Promise<ValidationResponse> {\n    return this.apiClient.validate(slug, data);\n  }\n\n  /**\n   * Submit form data\n   */\n  async submit(\n    slug: string,\n    data: Record<string, unknown>,\n    options?: SubmitOptions\n  ): Promise<SubmissionResponse> {\n    return this.apiClient.submit(slug, data, options);\n  }\n\n  /**\n   * Create a form handler for a specific form\n   */\n  form(slug: string, options?: FormHandlerOptions): FormHandler {\n    return new FormHandler(this.apiClient, slug, options);\n  }\n\n  /**\n   * Track a form view (for analytics completion rate)\n   */\n  async trackView(slug: string): Promise<void> {\n    return this.apiClient.trackView(slug);\n  }\n\n  /**\n   * Submit with retry logic for rate limits\n   */\n  async submitWithRetry(\n    slug: string,\n    data: Record<string, unknown>,\n    options?: SubmitOptions & { maxRetries?: number }\n  ): Promise<SubmissionResponse> {\n    const maxRetries = options?.maxRetries ?? 3;\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        return await this.submit(slug, data, options);\n      } catch (error) {\n        lastError = error as Error;\n\n        if (error instanceof FormsError) {\n          // Don't retry validation or auth errors\n          if (\n            [\n              'VALIDATION_ERROR',\n              'CAPTCHA_REQUIRED',\n              'ORIGIN_NOT_ALLOWED',\n            ].includes(error.code)\n          ) {\n            throw error;\n          }\n\n          // Retry rate limits with backoff\n          if (error.code.includes('RATE_LIMIT')) {\n            const retryAfter = error.retryAfter || Math.pow(2, attempt) * 1000;\n            await new Promise((resolve) => setTimeout(resolve, retryAfter));\n            continue;\n          }\n        }\n\n        // Exponential backoff for network errors\n        await new Promise((resolve) =>\n          setTimeout(resolve, Math.pow(2, attempt) * 1000)\n        );\n      }\n    }\n\n    throw lastError!;\n  }\n}\n","import { App } from 'vue';\nimport { FormsSDKConfig, FormsSDK } from '../core';\n\nconst FORMS_SDK_KEY = Symbol('forms-sdk');\n\n/**\n * Vue plugin for Forms SDK\n */\nexport function createFormsPlugin(config: FormsSDKConfig) {\n  const sdk = new FormsSDK(config);\n\n  return {\n    install(app: App) {\n      app.provide(FORMS_SDK_KEY, sdk);\n      app.config.globalProperties.$formsSDK = sdk;\n    },\n  };\n}\n\nexport { FORMS_SDK_KEY };\n"],"mappings":"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","names":[]}